<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Modelo Preditivo para Risco de Cr√©dito - Gl√≥ria Xavier</title>
    <meta name="description" content="Portf√≥lio de projetos de Gl√≥ria Xavier, Analista e Cientista de Dados." />
    <meta name="keywords" content="data science, portfolio, projetos, analise de dados, machine learning" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:card" content="" />

    <link href="https://fonts.googleapis.com/css?family=Oxygen:300,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700" rel="stylesheet">

    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/flexslider.css">
    <link rel="stylesheet" href="css/style.css">

    <script src="js/modernizr-2.6.2.min.js"></script>
</head>
<body class="pagina-inadimplencia">

    <div class="fh5co-loader"></div>

    <div id="page">
        <nav class="fh5co-nav" role="navigation">
            <div class="container-wrap">
                <div class="top-menu">
                    <div class="row">
                        <div class="col-xs-2">
                            <div id="fh5co-logo"><a href="index.html">Gl√≥ria</a></div>
                        </div>
                        <div class="col-xs-10 text-right menu-1">
                            <ul>
                                <li><a href="index.html">In√≠cio</a></li>
                                <li class="active"><a>Projeto</a></li>
                                <li><a href="about.html">Sobre</a></li>
                                <li><a href="contact.html">Contato</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <div class="container-wrap">
            <aside id="fh5co-hero">
                <div class="flexslider">
                    <ul class="slides">
                        <li style="background-image: url(images/header.png);">
                            <div class="overlay-gradient"></div>
                            <div class="row">
                                <div class="col-md-6 col-md-offset-3 slider-text slider-text-bg">
                                    <div class="slider-text-inner text-center">

                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </aside>
            <div id="fh5co-work">
                <p>
                    Este projeto demonstra a aplica√ß√£o pr√°tica de <b>Machine Learning</b> para previs√£o de inadimpl√™ncia.
                    Atrav√©s da an√°lise de dados socioecon√¥micos e hist√≥ricos de clientes, desenvolvi um modelo capaz de calcular um <b>Credit Score</b>
                    e classificar o risco de inadimpl√™ncia de forma precisa. O objetivo √© criar uma solu√ß√£o que apoie institui√ß√µes financeiras na tomada
                    de decis√µes estrat√©gicas, reduzindo perdas e otimizando a concess√£o de cr√©dito. Al√©m da modelagem, o projeto inclui <b>pipeline de dados</b>,
                    <b>otimiza√ß√£o de hiperpar√¢metros</b> e <b>interface web interativa</b> para demonstra√ß√£o do sistema.
                </p>
                <br><br>
                <div class="row">
                    <div class="col-md-6">
                        <div class="feature-box">
                            <i class="icon-bargraph" style="font-size: 48px; color: #C80000;"></i>
                            <br>
                            <h4>Modelo Anal√≠tico de Alta Performance</h4>
                            <p>Desenvolvimento de um modelo preditivo com LightGBM, otimizado para m√°xima performance (AUC de 0.77), utilizando t√©cnicas avan√ßadas de engenharia de atributos para identificar os principais fatores de risco em um dataset complexo.</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="feature-box">
                            <i class="icon-laptop" style="font-size: 48px; color: #C80000;"></i>
                            <h4>Aplica√ß√£o Web (Simulador de Risco)</h4>
                            <p>Constru√ß√£o de um produto de dados completo com uma arquitetura h√≠brida (Regras + ML), API em Flask e frontend interativo, transformando a an√°lise preditiva em uma ferramenta robusta, explic√°vel e funcional.</p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" id="headingSimulator">
                            <h4 class="panel-title">
                                <a role="button" data-toggle="collapse" data-parent="#accordionExample" href="#collapseSimulator" aria-expanded="true" aria-controls="collapseSimulator">
                                    <i class="icon-vcard"></i> Simulador de Cr√©dito
                                </a>
                            </h4>
                        </div>
                        <div id="collapseSimulator" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingSimulator">
                            <div class="panel-body">
                                <p class="text-center"><em>Preencha os campos abaixo para obter uma simula√ß√£o da an√°lise de cr√©dito com base no modelo treinado.</em></p>
                                <form id="credit-form" style="margin-top: 20px;">
                                    <div class="row">
                                        <div class="col-md-12"><h4>üë§ Informa√ß√µes Pessoais</h4></div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="DAYS_BIRTH">Idade</label><input type="number" class="form-control" id="DAYS_BIRTH" required placeholder="Ex: 45" min="18" max="100"></div>
                                            <div class="form-group"><label for="NAME_FAMILY_STATUS">Estado Civil</label>
                                                <select id="NAME_FAMILY_STATUS" class="form-control">
                                                    <option value="Married">Casado(a)</option>
                                                    <option value="Single / not married">Solteiro(a)</option>
                                                    <option value="Civil marriage">Uni√£o Est√°vel</option>
                                                    <option value="Separated">Separado(a)</option>
                                                    <option value="Widow">Vi√∫vo(a)</option>
                                                </select>
                                            </div>
                                            <div class="form-group"><label for="CNT_CHILDREN">Quantidade de Filhos</label><input type="number" class="form-control" id="CNT_CHILDREN" required placeholder="Ex: 0" min="0" max="30"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="NAME_EDUCATION_TYPE">N√≠vel de Educa√ß√£o</label>
                                                <select id="NAME_EDUCATION_TYPE" class="form-control">
                                                    <option value="Secondary / secondary special">Ensino M√©dio / T√©cnico</option>
                                                    <option value="Higher education">Ensino Superior</option>
                                                    <option value="Incomplete higher">Superior Incompleto</option>
                                                    <option value="Lower secondary">Ensino Fundamental</option>
                                                    <option value="Academic degree">P√≥s-gradua√ß√£o</option>
                                                </select>
                                            </div>
                                            <div class="form-group"><label for="NAME_HOUSING_TYPE">Tipo de Habita√ß√£o</label>
                                                <select id="NAME_HOUSING_TYPE" class="form-control">
                                                    <option value="House / apartment">Casa / Apartamento Pr√≥prio</option>
                                                    <option value="With parents">Com os Pais</option>
                                                    <option value="Rented apartment">Apartamento Alugado</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12"><h4>üíº Situa√ß√£o de Trabalho e Renda</h4></div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="AMT_INCOME_TOTAL">Renda Mensal</label><input type="number" class="form-control" id="AMT_INCOME_TOTAL" required placeholder="Ex: 5000" min="1" max="2000000"></div>
                                            <div class="form-group"><label for="DAYS_EMPLOYED">Tempo de Trabalho (anos)</label><input type="number" class="form-control" id="DAYS_EMPLOYED" required placeholder="Ex: 10" min="0" max="60"></div>
                                            <div class="form-group"><label for="NAME_INCOME_TYPE">Tipo de Renda</label>
                                                <select id="NAME_INCOME_TYPE" class="form-control">
                                                    <option value="Working">Assalariado(a)</option>
                                                    <option value="Commercial associate">S√≥cio(a)</option>
                                                    <option value="Pensioner">Aposentado(a)</option>
                                                    <option value="State servant">Servidor(a) P√∫blico</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="OCCUPATION_TYPE">Tipo de Emprego</label>
                                                <select id="OCCUPATION_TYPE" class="form-control">
                                                    <option value="Laborers">Oper√°rio(a)</option>
                                                    <option value="Sales staff">Vendedor(a)</option>
                                                    <option value="Core staff">Equipe Principal</option>
                                                    <option value="Managers">Gerente</option>
                                                    <option value="Drivers">Motorista</option>
                                                    <option value="High skill tech staff">T√©cnico Especializado</option>
                                                    <option value="Accountants">Contador(a)</option>
                                                    <option value="Medicine staff">√Årea da Sa√∫de</option>
                                                    <option value="Security staff">Seguran√ßa</option>
                                                    <option value="Cooking staff">Cozinheiro(a)</option>
                                                    <option value="Cleaning staff">Limpeza</option>
                                                    <option value="Private service staff">Servi√ßo Particular</option>
                                                    <option value="Low-skill Laborers">Trabalho de Baixa Qualifica√ß√£o</option>
                                                    <option value="Waiters/barmen staff">Gar√ßom/Barman</option>
                                                    <option value="Secretaries">Secret√°rio(a)</option>
                                                    <option value="Realty agents">Corretor(a)</option>
                                                    <option value="HR staff">Recursos Humanos</option>
                                                    <option value="IT staff">Tecnologia da Informa√ß√£o</option>
                                                </select>
                                            </div>
                                            <div class="form-group"><label for="ORGANIZATION_TYPE">Tipo de Organiza√ß√£o</label>
                                                <select id="ORGANIZATION_TYPE" class="form-control">
                                                    <option value="Business Entity Type 3">Empresa Privada</option>
                                                    <option value="Self-employed">Aut√¥nomo(a)</option>
                                                    <option value="Other">Outro</option>
                                                    <option value="Government">Governo</option>
                                                    <option value="School">Educa√ß√£o</option>
                                                    <option value="Medicine">Sa√∫de</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12"><h4>üè† Informa√ß√µes do Empr√©stimo</h4></div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="NAME_CONTRACT_TYPE_x">Tipo de Contrato</label>
                                                <select id="NAME_CONTRACT_TYPE_x" class="form-control">
                                                    <option value="Cash loans">Empr√©stimo Pessoal</option>
                                                    <option value="Revolving loans">Cr√©dito Rotativo</option>
                                                </select>
                                            </div>
                                            <div class="form-group"><label for="AMT_CREDIT">Valor Solicitado</label><input type="number" class="form-control" id="AMT_CREDIT" required placeholder="Ex: 250000" min="1" max="10000000"></div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group"><label for="AMT_ANNUITY">Valor da Parcela</label><input type="number" class="form-control" id="AMT_ANNUITY" required placeholder="Ex: 12000" min="1" max="500000"></div>
                                            <div class="form-group"><label for="AMT_GOODS_PRICE">Valor do Bem</label><input type="number" class="form-control" id="AMT_GOODS_PRICE" required placeholder="Ex: 250000" min="1" max="10000000"></div>
                                        </div>
                                    </div>
                                    <div id="error-messages" class="alert alert-danger" style="display: none; text-align: left; margin-bottom: 20px;">
                                        <strong>Por favor, corrija os seguintes erros:</strong>
                                        <ul id="error-list" style="margin-top: 10px;"></ul>
                                    </div>
                                    <div class="row" style="margin-top: 20px;">
                                        <div class="col-md-12 text-center">
                                            <button type="submit" class="btn btn-primary btn-lg">Analisar Cr√©dito</button>
                                        </div>
                                    </div>
                                </form>
                                <div id="resultado-analise" style="margin-top: 30px; display: none; text-align: center; padding: 20px; border-radius: 5px; transition: all 0.5s ease;">
                                    <h3 id="resultado-titulo"></h3>
                                    <p style="font-size: 1.1em;">Seu Score de Cr√©dito √©:</p>
                                    <p id="resultado-score" style="font-size: 3.5em; font-weight: 700; margin-top: -10px; margin-bottom: 20px;"></p>
                                    <p id="resultado-texto"></p>
                                    <div id="explicacao-recusa" class="panel-group" style="display: none; margin-top: 20px; text-align: left;">
                                        <div class="panel panel-default">
                                            <div class="panel-heading" role="tab">
                                                <h4 class="panel-title">
                                                    <a role="button" data-toggle="collapse" href="#collapseExplicacao">Entenda os principais motivos da an√°lise</a>
                                                </h4>
                                            </div>
                                            <div id="collapseExplicacao" class="panel-collapse collapse">
                                                <div class="panel-body">
                                                    <p>Com base em nosso modelo, os seguintes fatores tiveram maior peso nesta decis√£o:</p>
                                                    <ul id="lista-motivos-recusa"></ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h2>Parte 1: O Modelo Anal√≠tico Completo (O Trabalho de Data Science)</h2>
                    <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingResumoAnalise">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseResumoAnalise" aria-expanded="true" aria-controls="collapseResumoAnalise">
                RESUMO - Vis√£o Geral da Parte 1
            </a>
        </h4>
    </div>
    <div id="collapseResumoAnalise" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingResumoAnalise">
        <div class="panel-body">

            <div class="row summary-row">

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-bullseye summary-card-icon" style="color: #007bff;"></i>
                            <h5 class="summary-card-title">Objetivos</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Construir um modelo de alta performance (<strong>AUC &gt; 0.75</strong>) para prever inadimpl√™ncia, a partir da an√°lise e engenharia de atributos em um dataset complexo de m√∫ltiplas fontes.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-cogs summary-card-icon" style="color: #6f42c1;"></i>
                            <h5 class="summary-card-title">Tecnologias</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Projeto desenvolvido em <strong>Python</strong>, utilizando <strong>Pandas</strong> para manipula√ß√£o de dados, <strong>LightGBM</strong> para modelagem, e <strong>Scikit-learn</strong> para pr√©-processamento e valida√ß√£o.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-database summary-card-icon" style="color: #20c997;"></i>
                            <h5 class="summary-card-title">Dados</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Utilizado o dataset "Home Credit Default Risk", com <strong>8 tabelas relacionais</strong> contendo o hist√≥rico de cr√©dito de mais de <strong>300 mil clientes</strong>.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-sitemap summary-card-icon" style="color: #fd7e14;"></i>
                            <h5 class="summary-card-title">Pr√©-processamento</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Executado um pipeline rigoroso, incluindo tratamento de anomalias (identificadas em <strong>18% dos registros</strong>) e engenharia de atributos que criou centenas de novas features a partir da <strong>agrega√ß√£o de dados hist√≥ricos</strong>.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-brain summary-card-icon" style="color: #ffc107;"></i>
                            <h5 class="summary-card-title">Treinamento</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                O modelo <strong>LightGBM</strong> foi avaliado com <strong>Valida√ß√£o Cruzada</strong> (5-folds) para garantir robustez e treinado com <strong>Early Stopping</strong> para evitar overfitting, al√©m de usar <code>scale_pos_weight</code> para corrigir o desbalanceamento dos dados.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-trophy summary-card-icon" style="color: #28a745;"></i>
                            <h5 class="summary-card-title">Resultado</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                O modelo final alcan√ßou uma <strong>AUC m√©dia de 0.77+</strong> na valida√ß√£o cruzada, superando a meta inicial e demonstrando forte capacidade preditiva.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
                <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingObjetivos">
                    <h4 class="panel-title">
                        <a role="button" data-toggle="collapse" href="#collapseObjetivos" aria-expanded="false" aria-controls="collapseObjetivos">
                            Objetivos do Projeto
                        </a>
                    </h4>
                </div>
                <div id="collapseObjetivos" class="panel-collapse collapse collapse" role="tabpanel" aria-labelledby="headingObjetivos">
                    <div class="panel-body">
                        <p>
                            O objetivo principal desta fase foi desenvolver um modelo de Machine Learning de alta acur√°cia para a previs√£o de inadimpl√™ncia, alinhando metas t√©cnicas com os objetivos de neg√≥cio de uma institui√ß√£o financeira.
                        </p><br>

                        <h4>Objetivos de Neg√≥cio:</h4>
                        <ul class="business-objective-list"> <li><strong>Redu√ß√£o de Perdas (Loss Reduction):</strong> criar uma solu√ß√£o capaz de identificar com anteced√™ncia clientes com alto risco de inadimpl√™ncia, permitindo decis√µes de cr√©dito mais seguras e a redu√ß√£o de perdas financeiras.</li>
                            <li><strong>Aprova√ß√£o Otimizada:</strong> melhorar a capacidade de diferenciar clientes bons e maus pagadores para maximizar a aprova√ß√£o de cr√©dito para clientes com baixo risco, aumentando a carteira de clientes de forma saud√°vel.</li>
                        </ul><br>

                        <h4>Objetivos T√©cnicos:</h4>
                        <ul class="technical-objective-list"> <li><strong>An√°lise Explorat√≥ria e Engenharia de Atributos:</strong> realizar uma investiga√ß√£o em um dataset complexo e multidimensional para extrair insights e construir novos atributos (features) que aumentassem o poder preditivo do modelo.</li>
                            <li><strong>Constru√ß√£o de um Modelo de Alta Performance:</strong> selecionar, treinar e otimizar um modelo de Machine Learning (LightGBM) para maximizar a principal m√©trica de avalia√ß√£o, a <strong>AUC (Area Under the Curve)</strong>.</li>
                            <li><strong>Meta de Performance:</strong> com base nos benchmarks da competi√ß√£o original do Kaggle, onde os melhores modelos atingiram uma AUC pr√≥xima a 0.80, foi estipulada uma <strong>meta realista de alcan√ßar um score entre 0.75 e 0.80</strong>. Este intervalo reflete um modelo de alta performance, considerando a complexidade e a qualidade inerente dos dados, que apresentam um n√≠vel significativo de ru√≠do e dificuldade para previs√µes de maior acur√°cia.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTecnologias">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseTecnologias" aria-expanded="false" aria-controls="collapseTecnologias">
                Tecnologias Aplicadas
            </a>
        </h4>
            </div>
            <div id="collapseTecnologias" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTecnologias">
                <div class="panel-body">
                    <p>
                        Para o desenvolvimento completo deste projeto, da an√°lise de dados √† aplica√ß√£o web, foi utilizado o seguinte conjunto de tecnologias, bibliotecas e ferramentas:
                    </p>

                    <h4 style="margin-top: 25px;">An√°lise e Modelagem (Stack Python)</h4>
                    <ul class="list-with-bars" data-color="#2196F3">
                        <li><strong>Python:</strong> linguagem principal para toda a an√°lise, pr√©-processamento e desenvolvimento do backend.</li>
                        <li><strong>Pandas & NumPy:</strong> para manipula√ß√£o, limpeza e estrutura√ß√£o extensiva dos dados em formato de DataFrames.</li>
                        <li><strong>Scikit-learn:</strong> utilizado para pr√©-processamento, c√°lculo de m√©tricas e implementa√ß√£o da valida√ß√£o cruzada.</li>
                        <li><strong>LightGBM:</strong> como o algoritmo de Machine Learning principal, escolhido por sua alta performance e efici√™ncia.</li>
                        <li><strong>Matplotlib & Seaborn:</strong> para a cria√ß√£o de visualiza√ß√µes e gr√°ficos na an√°lise explorat√≥ria.</li>
                        <li><strong>SHAP:</strong> para a etapa de explicabilidade do modelo (XAI), permitindo a interpreta√ß√£o das decis√µes.</li>
                        <li><strong>Jupyter Notebook:</strong> como ambiente principal para a an√°lise explorat√≥ria e desenvolvimento iterativo.</li>
                    </ul>

                    <h4 style="margin-top: 30px;">Backend e API</h4>
                    <ul class="list-with-bars" data-color="#4CAF50">
                        <li><strong>Flask:</strong> micro-framework Python utilizado para construir a API REST que serve as previs√µes do modelo.</li>
                        <li><strong>Joblib:</strong> para a serializa√ß√£o (salvar e carregar) do pipeline de Machine Learning treinado para uso na aplica√ß√£o.</li>
                    </ul>

                    <h4 style="margin-top: 30px;">Frontend (Interface do Simulador)</h4>
                    <ul class="list-with-bars" data-color="#FFA726">
                        <li><strong>HTML5 & CSS3:</strong> para a estrutura√ß√£o e estiliza√ß√£o da p√°gina e da interface da calculadora.</li>
                        <li><strong>JavaScript (ES6):</strong> para a interatividade, valida√ß√£o de formul√°rios e comunica√ß√£o com a API via requisi√ß√µes <code>fetch</code>.</li>
                        <li><strong>Bootstrap:</strong> framework CSS utilizado para criar um layout responsivo e profissional de forma √°gil.</li>
                    </ul>
                </div>
            </div>
        </div>
                <div class="panel panel-default">
                <div class="panel-heading" role="tab" id="headingTwo">
                  <h4 class="panel-title">
                    <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordionExample" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                      Dados Utilizados
                    </a>
                  </h4>
                </div>
                <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                  <div class="panel-body">
                       <p>
                O dataset utilizado neste projeto √© o <strong>"Home Credit Default Risk"</strong>, disponibilizado pela institui√ß√£o financeira Home Credit em uma competi√ß√£o na plataforma Kaggle. O objetivo √© desafiar cientistas de dados a prever a capacidade de pagamento de clientes, muitos dos quais possuem pouco ou nenhum hist√≥rico de cr√©dito tradicional (a popula√ß√£o "unbanked").
            </p>

            <h4>Estrutura e Complexidade dos Dados</h4>
            <p>
                A principal caracter√≠stica do projeto √© sua estrutura relacional complexa. Para criar um perfil completo de cada cliente, foi necess√°rio processar, agregar e unir dados de 8 tabelas interligadas, como ilustrado no diagrama abaixo.
            </p>
            
            <div style="text-align: center; margin-top: 20px; margin-bottom: 30px;">
                <img src="images/image_rel.png" class="img-responsive img-rounded" alt="Diagrama da estrutura relacional do dataset" style="margin: 0 auto;">
                <p class="text-center" style="margin-top: 10px;"><em>Figura 1: Esquema relacional do dataset.</em></p>
            </div>

            <h4>Principais Tabelas e Colunas</h4>
            <p>A seguir, uma descri√ß√£o das colunas mais relevantes das duas tabelas principais utilizadas na modelagem.</p>

            <h5><strong>Tabela Principal: application_train.csv</strong></h5>
            <p>Cont√©m os dados da solicita√ß√£o de empr√©stimo e a vari√°vel-alvo. Cada linha √© uma solicita√ß√£o √∫nica.</p>
            <div class="table-responsive">
    <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Exemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>SK_ID_CURR</td>
                        <td>Integer</td>
                        <td>ID √∫nico da solicita√ß√£o de empr√©stimo.</td>
                        <td>100002</td>
                    </tr>
                    <tr>
                        <td><strong>TARGET</strong></td>
                        <td><strong>Boolean</strong></td>
                        <td><strong>A vari√°vel-alvo: 1 para inadimplente, 0 para adimplente.</strong></td>
                        <td><strong>1</strong></td>
                    </tr>
                    <tr>
                        <td>AMT_INCOME_TOTAL</td>
                        <td>Float</td>
                        <td>Renda mensal do cliente.</td>
                        <td>202500.0</td>
                    </tr>
                    <tr>
                        <td>AMT_CREDIT</td>
                        <td>Float</td>
                        <td>Valor total do cr√©dito solicitado.</td>
                        <td>406597.5</td>
                    </tr>
                    <tr>
                        <td>NAME_EDUCATION_TYPE</td>
                        <td>String</td>
                        <td>N√≠vel de escolaridade do cliente.</td>
                        <td>'Higher education'</td>
                    </tr>
                    <tr>
                        <td>DAYS_BIRTH</td>
                        <td>Integer</td>
                        <td>Idade do cliente em dias (negativo).</td>
                        <td>-9461</td>
                    </tr>
                    <tr>
                        <td><strong>EXT_SOURCE_2 / 3</strong></td>
                        <td><strong>Float</strong></td>
                        <td><strong>Scores normalizados de fontes de dados externas (cruciais para a predi√ß√£o).</strong></td>
                        <td><strong>0.262949</strong></td>
                    </tr>
                </tbody>
            </table>
            </div>

            <h5 style="margin-top: 30px;"><strong>Tabela Externa: bureau.csv</strong></h5>
            <p>Cont√©m informa√ß√µes sobre cr√©ditos anteriores do cliente em outras institui√ß√µes financeiras.</p>
            <div class="table-responsive">
    <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Tipo</th>
                        <th>Descri√ß√£o</th>
                        <th>Exemplo</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>SK_ID_CURR</td>
                        <td>Integer</td>
                        <td>ID da solicita√ß√£o (chave para unir com a tabela principal).</td>
                        <td>215354</td>
                    </tr>
                    <tr>
                        <td>CREDIT_ACTIVE</td>
                        <td>String</td>
                        <td>Status do cr√©dito (Ativo, Fechado, etc.).</td>
                        <td>'Closed'</td>
                    </tr>
                    <tr>
                        <td>DAYS_CREDIT</td>
                        <td>Integer</td>
                        <td>H√° quantos dias o cr√©dito foi solicitado (negativo).</td>
                        <td>-497</td>
                    </tr>
                     <tr>
                        <td>AMT_CREDIT_SUM</td>
                        <td>Float</td>
                        <td>Valor atual do cr√©dito reportado pelo bureau.</td>
                        <td>91323.0</td>
                    </tr>
                </tbody>
            </table>
            </div>

            <h4 style="margin-top: 30px;">O Principal Desafio Anal√≠tico</h4>
            <p>
                O desafio central deste projeto reside em transformar essa estrutura complexa em um conjunto de dados √∫nico e rico em informa√ß√µes, agregando o comportamento hist√≥rico de cada cliente (ex: n√∫mero de cr√©ditos ativos, m√©dia de d√≠vidas passadas) para que o modelo de Machine Learning pudesse encontrar padr√µes preditivos de inadimpl√™ncia.
            </p>
				  </div>
				</div>
				</div>
				<div class="panel panel-default">
				<div class="panel-heading" role="tab" id="headingFive">
				  <h4 class="panel-title">
					<a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordionExample" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
					  An√°lise de Qualidade e Tratamento dos Dados
					</a>
				  </h4>
				</div>
				<div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
				  <div class="panel-body">
					<p>
                A transforma√ß√£o dos dados brutos em um formato de qualidade para a modelagem foi a etapa mais complexa do projeto. O processo seguiu um fluxo de diagn√≥stico, limpeza iterativa e enriquecimento dos dados.
						</p>

						<h4 style="margin-top: 25px;">1. Diagn√≥stico da Qualidade dos Dados</h4>
						<p>A primeira etapa foi quantificar os problemas nos dados brutos. A an√°lise revelou os seguintes pontos cr√≠ticos:</p>
						
						<ul class="data-quality-list"> <li>
								<strong>Completude:</strong> diversas colunas apresentavam um alto volume de dados faltantes, com algumas superando <strong>70% de valores nulos</strong>, tornando-as invi√°veis para uso direto.
							</li>
							<li>
								<strong>Validade:</strong> foi identificada uma anomalia na coluna <code>DAYS_EMPLOYED</code>, onde <strong>18.01% dos registros</strong> continham um valor que representava "aposentado", exigindo tratamento espec√≠fico.
							</li>
							<li>
								<strong>Consist√™ncia e Unicidade:</strong> a base de dados se mostrou consistente e √≠ntegra, com <strong>0 registros</strong> apresentando inconsist√™ncia entre idade/tempo de trabalho e <strong>0 solicita√ß√µes duplicadas</strong>.
							</li>
						</ul>

						<h4 style="margin-top: 30px;">2. Limpeza e Sele√ß√£o de Features (1¬™ Rodada)</h4>
						<p>
							Com base no diagn√≥stico, foi realizada uma primeira limpeza focada na tabela principal (<code>application_train</code>). Um modelo LightGBM preliminar foi treinado para gerar um ranking de import√¢ncia das vari√°veis. Com base nesse ranking:
						</p>
						<ul class="custom-list-style">
							<li>Foram removidas vari√°veis com import√¢ncia igual a zero.</li>
							<li>Foram removidas vari√°veis com baixa import√¢ncia e alto percentual de nulos (acima de 75%).</li>
							<li>Os valores nulos restantes foram tratados com a <strong>mediana</strong> para dados num√©ricos e a <strong>moda</strong> para categ√≥ricos.</li>
						</ul>
						<h4 style="margin-top: 30px;">3. Engenharia de Atributos (Agrega√ß√£o)</h4>
						<p>
							O passo mais crucial foi enriquecer a tabela principal com o hist√≥rico de cada cliente, consolidado a partir das 7 tabelas secund√°rias. Para isso, foi desenvolvida uma fun√ß√£o gen√©rica para agregar os dados:
						</p>
						
						<pre style="background-color: #cecdcd50; color: #000000; padding: 15px; "><code>
			<span style="color: #075800;"># O n√∫cleo da l√≥gica de agrega√ß√£o</span>
			bureau_agg = bureau.groupby('SK_ID_CURR').agg({
				'DAYS_CREDIT': ['mean', 'max', 'min'],
				'AMT_CREDIT_SUM': ['sum', 'mean'],
				'CREDIT_ACTIVE': ['nunique']
			})
			bureau_agg.columns = ['BUREAU_' + '_'.join(col).upper() <span style="color: #f92672;">for</span> col <span style="color: #f92672;">in</span> bureau_agg.columns.ravel()]
						</code></pre>
						<p>
							Essa estrat√©gia foi aplicada em um loop para processar e unir todas as tabelas secund√°rias, criando centenas de novas features preditivas (ex: m√©dia de d√≠vidas, n√∫mero de empr√©stimos anteriores, etc.).
						</p>

						<h4 style="margin-top: 30px;">4. Limpeza e Refinamento Final (2¬™ Rodada)</h4>
						<p>
							Ap√≥s a jun√ß√£o de todas as tabelas, o dataset final continha 358 colunas. Um novo processo de sele√ß√£o de features foi realizado neste dataset enriquecido para remover vari√°veis redundantes ou com baixo poder preditivo, resultando em um conjunto de dados final contendo 237 vari√°veis, otimizado para o treinamento.
						</p>
				  </div>
				</div>
				</div>
				<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTreinamento">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseTreinamento" aria-expanded="false" aria-controls="collapseTreinamento">
                Treinamento do Modelo
            </a>
        </h4>
    </div>
    <div id="collapseTreinamento" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTreinamento">
        <div class="panel-body">
            <p>
                Esta foi minha primeira experi√™ncia pr√°tica construindo um projeto de Machine Learning do in√≠cio ao fim. O objetivo desta etapa foi aplicar os conhecimentos te√≥ricos em um desafio complexo do mundo real, focando em tomar as melhores decis√µes poss√≠veis com as ferramentas e o conhecimento que eu estava adquirindo ao longo do processo.
            </p>

            <h4 style="margin-top: 25px;">1. Escolha do Algoritmo e Desafios de Implementa√ß√£o</h4>
            <p>
                Ap√≥s pesquisar sobre os algoritmos mais perform√°ticos para dados tabulares, a escolhi o <strong>Light Gradient Boosting Machine (LightGBM)</strong>. O treinamento pr√°tico revelou desafios. A seguir, os principais aprendizados e as solu√ß√µes aplicadas:
            </p>
            <ul class="list-with-bars" data-color="#FFA726">
                <li>
                    <strong>Desbalanceamento de Classes:</strong> um dos primeiros desafios pr√°ticos encontrados foi o forte desbalanceamento entre adimplentes e inadimplentes no dataset. Para evitar que o modelo se tornasse enviesado, estudei e apliquei o hiperpar√¢metro <code>scale_pos_weight</code>, que atribui um peso maior aos exemplos da classe minorit√°ria.
                </li>
                <li>
                    <strong>Otimiza√ß√£o de Hiperpar√¢metros:</strong> como este era meu primeiro projeto de ponta a ponta, a otimiza√ß√£o de hiperpar√¢metros foi feita de forma manual e iterativa. Embora existam t√©cnicas mais avan√ßadas e automatizadas (como Optuna), que pretendo explorar em projetos futuros, a otimiza√ß√£o realizada foi fundamental para o ganho de performance e para um entendimento mais profundo de como os par√¢metros afetam o modelo.
                </li>
            </ul>

             <pre style="background-color: #cecdcd50; color: #000000; padding: 15px; margin-top: 15px;"><code>
<span style="color: #075800;"># Defini√ß√£o dos par√¢metros otimizados e peso de classe</span>
params = {
    'objective': 'binary', 'metric': 'auc', 'boosting_type': 'gbdt',
    'n_estimators': 1000, 'learning_rate': 0.02,
    'num_leaves': 63, 'max_depth': 7, 
    'seed': 42, 'n_jobs': -1, 'verbose': -1
}
target_counts = ytrain.value_counts()
scale_pos_weight = target_counts[0] / target_counts[1]
params['scale_pos_weight'] = scale_pos_weight
            </code></pre>

            <h4 style="margin-top: 30px;">2. Estrat√©gia de Valida√ß√£o e Treinamento Final</h4>
            <p>
                Para garantir uma avalia√ß√£o robusta e um treinamento eficaz, foram empregadas duas estrat√©gias distintas em momentos diferentes do projeto:
            </p>
            <ul class="list-with-bars" data-color="#4CAF50">
                <li>
                    <strong>Valida√ß√£o Cruzada (Durante a An√°lise):</strong> nas fases de explora√ß√£o e sele√ß√£o de features, a <strong>Valida√ß√£o Cruzada com 5 folds</strong> foi utilizada. Este m√©todo forneceu uma estimativa de performance (AUC) muito est√°vel e confi√°vel, sendo crucial para tomar decis√µes sobre quais features manter ou remover.
                </li>
                <li>
                    <strong>Treinamento Final (Divis√£o Treino/Valida√ß√£o):</strong> ap√≥s a finaliza√ß√£o do pr√©-processamento, o modelo definitivo foi treinado no conjunto de treino (80% dos dados) e monitorado em um conjunto de valida√ß√£o (20%) com a t√©cnica de <strong>Early Stopping</strong>, que interrompe o treinamento quando a performance para de melhorar, evitando o superajuste e garantindo a melhor performance do modelo final.
                </li>
            </ul>
            
            <pre style="background-color: #cecdcd50; color: #000000; padding: 15px; margin-top: 15px;"><code>
<span style="color: #0603b3;"># Separando 20% dos dados para valida√ß√£o e early stopping</span>
xtrain, xval, ytrain, yval = train_test_split(
    tabela_treino_final, y, test_size=0.2, random_state=42, stratify=y
)

<span style="color: #0603b3;"># Treinando o modelo final com early stopping</span>
model = lgb.LGBMClassifier(**params)
model.fit(
    xtrain, ytrain,
    eval_set=[(xval, yval)],
    eval_metric='auc',
    callbacks=[lgb.early_stopping(100, verbose=False)]
)
            </code></pre>
        </div>
    </div>
</div>
				<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingResultados">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseResultados" aria-expanded="false" aria-controls="collapseResultados">
                Resultados e Interpretabilidade do Modelo
            </a>
        </h4>
    </div>
    <div id="collapseResultados" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingResultados">
        <div class="panel-body">
            <p>
                Ap√≥s as etapas de pr√©-processamento e treinamento, o modelo final foi avaliado para aferir sua performance e, mais importante, para entender e interpretar suas decis√µes.
            </p>

            <h4 style="margin-top: 25px;">1. Performance do Modelo</h4>
            <p>
                A performance do modelo foi aferida com duas estrat√©gias complementares para garantir a robustez e a consist√™ncia dos resultados. A m√©trica principal utilizada foi a <strong>AUC (Area Under the Curve)</strong>.
            </p>
            <ul class="list-with-bars" data-color="#28a745"> <li>
                    <strong>Estimativa Robusta com Valida√ß√£o Cruzada:</strong> para obter uma estimativa confi√°vel da capacidade de generaliza√ß√£o do modelo, foi utilizada a Valida√ß√£o Cruzada com 5 folds. O resultado foi uma <strong>AUC m√©dia de 0.7725</strong>, um score est√°vel que superou a meta inicial do projeto.
                </li>
                <li>
                    <strong>Performance do Modelo Final:</strong> confirmando este resultado, o modelo definitivo treinado com Early Stopping alcan√ßou uma <strong>AUC de 0.7756</strong> no conjunto de dados de valida√ß√£o, demonstrando a consist√™ncia da performance.
                </li>
            </ul>
            <div style="text-align: center; margin-top: 20px; margin-bottom: 30px;">
                <img src="images/treinamento_final.png" class="img-responsive img-rounded" alt="Resultado do treinamento final no conjunto de valida√ß√£o" style="margin: 0 auto; border: 1px solid #ddd;">
                <p class="text-center" style="margin-top: 10px;"><em>Figura 2: performance do modelo final no conjunto de valida√ß√£o.</em></p>
            </div>


            <h4 style="margin-top: 30px;">2. Vari√°veis Mais Importantes (Feature Importance)</h4>
            <p>
                A an√°lise da import√¢ncia das features revelou quais fatores o modelo final mais utilizou para tomar suas decis√µes. Conforme esperado, as vari√°veis de scores externos e informa√ß√µes demogr√°ficas se mostraram as mais influentes.
            </p>
             <div style="text-align: center; margin-top: 20px; margin-bottom: 30px;">
                <img src="images/feature_importances.png" class="img-responsive img-rounded" alt="Gr√°fico com as 50 vari√°veis mais importantes para o modelo" style="margin: 0 auto; border: 1px solid #ddd;">
                <p class="text-center" style="margin-top: 10px;"><em>Figura 3: ranking das 50 features com maior poder preditivo no modelo final.</em></p>
            </div>

            <h4 style="margin-top: 30px;">3. Explicabilidade do Modelo com SHAP (XAI)</h4>
            <p>
                Para ir al√©m da import√¢ncia geral e entender como cada vari√°vel impacta a previs√£o, foi utilizada a biblioteca <strong>SHAP (SHapley Additive exPlanations)</strong>. Esta t√©cnica de IA Explic√°vel (XAI) permite "abrir a caixa-preta" do modelo.
            </p>
            
            <div style="text-align: center; margin-top: 20px; margin-bottom: 30px;">
                <img src="images/shap_final.png" class="img-responsive img-rounded" alt="Gr√°fico de resumo do SHAP para o modelo" style="margin: 0 auto; border: 1px solid #ddd;">
                <p class="text-center" style="margin-top: 10px;"><em>Figura 4: SHAP Summary Plot, mostrando o impacto de cada feature nas previs√µes.</em></p>
            </div>

            <p><strong>Principais Insights do SHAP:</strong></p>
            <ul class="list-with-bars" data-color="#6f42c1"> <li>
                    <strong>EXT_SOURCE_2 e 3:</strong> confirmam-se como as vari√°veis mais importantes. Valores <strong>altos</strong> (vermelho) empurram a previs√£o para a esquerda, diminuindo o risco (melhores scores externos = menor risco).
                </li>
                 <li>
                    <strong>DAYS_EMPLOYED:</strong> valores <strong>altos</strong> (vermelho, indicando pouco tempo de emprego) tendem a empurrar a previs√£o para a direita, aumentando o risco. Clientes com mais tempo de emprego (azul) apresentam menor risco.
                </li>
            </ul>

        </div>
    </div>
</div>


				<h2>Parte 2: O Modelo Simplificado e a Calculadora</h2>
				<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingResumoParte2">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseResumoParte2" aria-expanded="true" aria-controls="collapseResumoParte2">
                RESUMO - Vis√£o Geral da Parte 2: Da An√°lise ao Produto
            </a>
        </h4>
    </div>
    <div id="collapseResumoParte2" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingResumoParte2">
        <div class="panel-body">
            
            <div class="row summary-row">

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-puzzle-piece summary-card-icon" style="color: #007bff;"></i>
                            <h5 class="summary-card-title">O Desafio</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Traduzir o modelo anal√≠tico complexo (Parte 1) para uma aplica√ß√£o web pr√°tica, usando apenas os <strong>14 campos de um formul√°rio</strong>, sem perder a confiabilidade.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-search-plus summary-card-icon" style="color: #dc3545;"></i>
                            <h5 class="summary-card-title">Diagn√≥stico de Falhas</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                O modelo simplificado, embora estatisticamente aceit√°vel, apresentou <strong>falhas l√≥gicas graves</strong> em testes de sanidade, gerando previs√µes inconsistentes para perfis extremos.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-shield-alt summary-card-icon" style="color: #28a745;"></i>
                            <h5 class="summary-card-title">A Solu√ß√£o</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                Foi projetada uma <strong>arquitetura h√≠brida</strong>, combinando um <strong>Scorecard de Regras de Neg√≥cio</strong> (para casos √≥bvios) com o <strong>modelo de Machine Learning</strong> (para a "zona cinzenta").
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-vial summary-card-icon" style="color: #ffc107;"></i>
                            <h5 class="summary-card-title">Valida√ß√£o</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                O sistema h√≠brido foi validado com os mesmos testes de sanidade, provando ser <strong>100% eficaz</strong> em corrigir as inconsist√™ncias l√≥gicas do modelo simplificado.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-sm-6 summary-card-wrapper">
                    <div class="summary-card-item">
                        <div class="summary-card-header">
                            <i class="fas fa-lightbulb summary-card-icon" style="color: #17a2b8;"></i>
                            <h5 class="summary-card-title">Considera√ß√µes Finais</h5>
                        </div>
                        <div class="summary-card-content">
                            <p>
                                O projeto demonstrou a import√¢ncia de unir a ci√™ncia de dados com a engenharia de software para criar <strong>produtos de dados robustos</strong>, confi√°veis e prontos para o mundo real.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
	<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingSimplificacao">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseSimplificacao" aria-expanded="false" aria-controls="collapseSimplificacao">
                O Desafio da Simplifica√ß√£o
            </a>
        </h4>
    </div>
    <div id="collapseSimplificacao" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSimplificacao">
        <div class="panel-body">
            <p>
                O modelo anal√≠tico da Parte 1, apesar de sua alta performance (AUC 0.77+), foi constru√≠do em um ambiente de laborat√≥rio com acesso a um vasto hist√≥rico de dados do cliente, com mais de 230 vari√°veis. O desafio pr√°tico surgiu ao tentar traduzir essa an√°lise para o simulador web interativo, que precisa dar uma resposta em tempo real para um <strong>novo cliente</strong>.
            </p>
            <p>
                Isso criou uma lacuna de dados, pois o modelo anal√≠tico dependia de informa√ß√µes que n√£o est√£o dispon√≠veis no momento do preenchimento.
            </p>

            <h5 style="margin-top: 25px; font-weight: bold;">Principais Impedimentos do Modelo Complexo:</h5>
            <ul class="list-with-bars" data-color="#fd7e14"> <li>
                    <strong>Depend√™ncia de Dados Externos:</strong> as features mais importantes do modelo, como <code>EXT_SOURCE_2</code> e <code>EXT_SOURCE_3</code>, s√£o scores de cr√©dito externos que n√£o existem para um novo solicitante.
                </li>
                <li>
                    <strong>Hist√≥rico Inexistente:</strong> muitas das features mais preditivas foram criadas a partir da agrega√ß√£o do hist√≥rico de pagamentos e empr√©stimos anteriores do cliente, informa√ß√µes que, por defini√ß√£o, um novo cliente n√£o possui.
                </li>
                <li>
                    <strong>Lat√™ncia e Custo Computacional:</strong> um modelo com mais de 230 features, que exige a consulta e agrega√ß√£o de 8 tabelas, √© muito lento e caro para operar em tempo real em uma aplica√ß√£o web.
                </li>
            </ul>

            <h4 style="margin-top: 30px;">A Decis√£o Estrat√©gica</h4>
            <p>
                Ficou claro que era necess√°rio construir um novo modelo, <strong>muito mais simples</strong>, treinado para operar sob as restri√ß√µes do mundo real. Este novo modelo seria treinado utilizando exclusivamente as <strong>14 vari√°veis</strong>, presentes na calculadora, que um cliente pode fornecer atrav√©s do formul√°rio.
            </p>
             <p>
                Com essas premissas, um novo modelo LightGBM foi treinado. Esse novo modelo era menos perform√°tico (AUC ~0.68), mas era uma solu√ß√£o vi√°vel para o simulador web. Al√©m disso, o modelo simplificado apresentou novos problemas que trataremos a seguir.
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingDiagnostico">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseDiagnostico" aria-expanded="false" aria-controls="collapseDiagnostico">
                Diagn√≥stico de Falhas do Modelo Simplificado
            </a>
        </h4>
		
    </div>
	
    <div id="collapseDiagnostico" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingDiagnostico">
        <div class="panel-body">
			<p>
                Ap√≥s treinar um modelo de Machine Learning usando apenas as 14 vari√°veis dispon√≠veis no formul√°rio, o primeiro passo foi avaliar sua performance. As m√©tricas estat√≠sticas, como a <strong>AUC de 0.68</strong>, indicavam um modelo razo√°vel.
            </p>
            <p>
                No entanto, a verdadeira prova de um modelo destinado a uma aplica√ß√£o real n√£o est√° apenas em suas m√©tricas, mas em seu comportamento em cen√°rios pr√°ticos e, por vezes, extremos. Para validar a coer√™ncia e o "bom senso" do modelo, foram criados diversos perfis de teste simulando clientes com caracter√≠sticas muito espec√≠ficas (como rendas muito altas, endividamento extremo, etc.).
            </p>
            <p>
                Foi durante essa fase de testes de sanidade que <strong>falhas l√≥gicas graves foram descobertas</strong>. O modelo, por ser uma "caixa-preta" focada em padr√µes estat√≠sticos, n√£o conseguia aplicar regras de neg√≥cio √≥bvias, resultando em previs√µes inconsistentes e, em alguns casos, absurdas. Ficou claro que, para um produto de dados confi√°vel, um modelo de Machine Learning puro n√£o seria suficiente.
            </p>
            <p>
                O carrossel abaixo demonstra, com exemplos pr√°ticos, algumas das inconsist√™ncias mais cr√≠ticas encontradas, comparando o comportamento il√≥gico do modelo simplificado com a resposta correta do sistema h√≠brido final.
            </p><br>

            <div id="diagnosticoCarousel" class="carousel slide diagnostico-carousel" data-ride="carousel" data-interval="false">
                <ol class="carousel-indicators">
                    <li data-target="#diagnosticoCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#diagnosticoCarousel" data-slide-to="1"></li>
                    <li data-target="#diagnosticoCarousel" data-slide-to="2"></li>
                </ol>

                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <div class="text-center" style="margin-bottom: 20px;">
                            <h4>Caso 1: Perfil de Baix√≠ssimo Risco (Milion√°rio)</h4>
                            <p>Simula√ß√£o de um cliente com renda alt√≠ssima solicitando um empr√©stimo de valor irris√≥rio.</p>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 text-center">
                                <h5>Antes: Modelo Simplificado (ML Puro)</h5>
                                <figure>
                                    <img src="images/antes_irrisorio.png" class="img-responsive img-rounded" alt="Resultado inconsistente" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado: score mediano. Nesse caso, o mais l√≥gico seria conceder cr√©dito imediatamente, dada a renda do cliente em compara√ßao ao valor √≠nfimo das parcelas e do empr√©stimo.</em></figcaption>
                                </figure>
                            </div>
                            <div class="col-sm-6 text-center">
                                <h5>Depois: Sistema H√≠brido</h5>
                                <figure>
                                    <img src="images/depois_irrisorio.png" class="img-responsive img-rounded" alt="Resultado correto" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado correto: score alt√≠ssimo. Ap√≥s a implementa√ß√£o da arquitetura h√≠brida, o resultado do score ficou coerente.</em></figcaption>
                                </figure>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="text-center" style="margin-bottom: 20px;">
                            <h4>Caso 2: Perfil de Alto Risco (Superendividado)</h4>
                            <p>Simula√ß√£o de um cliente cuja parcela do empr√©stimo compromete 75% de sua renda mensal.</p>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 text-center">
                                <h5>Antes: Modelo Simplificado (ML Puro)</h5>
                                <figure>
                                    <img src="images/antes_endividado.png" class="img-responsive img-rounded" alt="Resultado inconsistente" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado il√≥gico: nesse caso, um cliente cuja renda ficasse comprometida em 75% por conta do empr√©stimo, jamais deveria receber um score t√£o alto.</em></figcaption>
                                </figure>
                            </div>
                            <div class="col-sm-6 text-center">
                                <h5>Depois: Sistema H√≠brido</h5>
                                <figure>
                                    <img src="images/depois_endividado.png" class="img-responsive img-rounded" alt="Resultado correto" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado correto: ap√≥s a implementa√ß√£o da arquitetura h√≠brida, foi estabelecido que, caso as parcelas comprometessem a renda do cliente em mais de 60%, seu score seria baixo, para evitar riscos.</em></figcaption>
                                </figure>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="text-center" style="margin-bottom: 20px;">
                            <h4>Caso 3: Perfil Seguro </h4>
                            <p>Simula√ß√£o de um cliente com um perfil seguro.</p>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 text-center">
                                <h5>Antes: Modelo Simplificado (ML Puro)</h5>
                                <figure>
                                    <img src="images/antes_seguro.png" class="img-responsive img-rounded" alt="Resultado inconsistente" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado il√≥gico: o perfil desse cliente pode ser visto como seguro, pois al√©m das parcelas n√£o comprometerem grande parte da renda, suas caracter√≠sticas socioecon√¥micas passam certa "seguran√ßa".</em></figcaption>
                                </figure>
                            </div>
                            <div class="col-sm-6 text-center">
                                <h5>Depois: Sistema H√≠brido</h5>
                                <figure>
                                    <img src="images/depois_seguro2.png" class="img-responsive img-rounded" alt="Resultado correto" style="border: 1px solid #ddd;">
                                    <figcaption style="margin-top: 10px; font-size: 0.9em; color: #777;"><em>Resultado correto: o perfil desse cliente n√£o apresenta alto risco.</em></figcaption>
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>

                <a class="left carousel-control" href="#diagnosticoCarousel" role="button" data-slide="prev">
                    <i class="fas fa-chevron-left"></i>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#diagnosticoCarousel" role="button" data-slide="next">
                    <i class="fas fa-chevron-right"></i>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            </div>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingSolucao">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseSolucao" aria-expanded="false" aria-controls="collapseSolucao">
                A Solu√ß√£o: Arquitetura H√≠brida (Regras + Machine Learning)
            </a>
        </h4>
    </div>
    <div id="collapseSolucao" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSolucao">
        <div class="panel-body">
            <p>
                Diante das falhas l√≥gicas do modelo simplificado, a solu√ß√£o foi projetar uma <strong>arquitetura de decis√£o em duas camadas</strong>, que combina regras de neg√≥cio com o poder preditivo do Machine Learning.
            </p>

            <h4 style="margin-top: 25px;">Fluxo de Decis√£o do Sistema H√≠brido</h4>
            
            <div class="flowchart-detailed" style="margin-top: 20px;">
                <div class="step">1. [Entrada de Dados do Cliente]</div>
                <div class="arrow">‚Üì</div>
                <div class="scorecard-details">
                    <h5>Camada 1: Scorecard de Regras</h5>
                    <strong>Score Inicial = 500</strong>
                    <ul>
                        <li class="penalty">-400 pts se Parcela/Renda > 60%</li>
                        <li class="penalty">-150 pts se Idade < 22 anos</li>
                        <li class="bonus">+300 pts se Cr√©dito <= R$ 1.000</li>
                    </ul>
                </div>
                <div class="arrow">‚Üì</div>
                <div class="step decision-box">2. Score de Regras est√° nas Zonas de Veto?</div>
                
                <div class="row">
                    <div class="col-xs-6 text-center">
                        <div class="path-label text-danger">‚Ü≥ SIM (Score &lt; 400 ou &gt; 650)</div>
                        <div class="arrow">‚Üì</div>
                        <div class="step">3a. <strong>Camada 1:</strong> traduz o score de regras em uma <strong>probabilidade final</strong>.</div>
                    </div>
                    <div class="col-xs-6 text-center">
                        <div class="path-label text-success">‚Ü≥ N√ÉO (Zona Cinzenta)</div>
                        <div class="arrow">‚Üì</div>
                        <div class="step">3b. <strong>Camada 2: modelo ML</strong> calcula a probabilidade.</div>
                    </div>
                </div>
                
                <div class="arrow">‚Üì</div>
                
                <div class="result-box">4. Converte a <strong>probabilidade final</strong> em um Score (100-1000)</div>
            </div>

            <h4 style="margin-top: 30px;">Detalhes das Camadas</h4>
            <ul class="list-with-bars" data-color="#28a745">
                 <li>
                    <strong>Camada 1: O Scorecard de Veto:</strong> um sistema de pontos que analisa regras de neg√≥cio. Se o score final cai em uma "zona de veto", a decis√£o √© tomada imediatamente.
                </li>
                <li>
                    <strong>Camada 2: O Modelo de ML na "Zona Cinzenta":</strong> apenas os perfis que n√£o s√£o "preto no branco" s√£o passados para o modelo LightGBM, que usa sua for√ßa para analisar as intera√ß√µes sutis entre as vari√°veis em cen√°rios complexos.
                </li>
            </ul>
            
            <hr>
            <h4 style="margin-top: 30px;">A L√≥gica por Tr√°s das F√≥rmulas e Limites</h4>
            <p>
                Os valores num√©ricos do sistema (limites, pesos e f√≥rmulas) n√£o foram gerados pelo modelo de ML, mas sim definidos manualmente. Para criar as f√≥rmulas, combinei os insights da minha pr√≥pria an√°lise de dados e utilizei uma IA como ferramenta de apoio para refinar e calibrar os valores finais, inserindo l√≥gicas de neg√≥cio consistentes com o mercado e, por fim, realizei testes de sanidade para determinar se os resultados estavam satisfat√≥rios e coerentes.
            </p>
            <ul class="list-with-bars" data-color="#6f42c1"> <li>
                    <strong>As Zonas de Veto (< 400 e > 650):</strong> foram calibradas para serem conservadoras. Os pesos das regras (ex: <strong>-400</strong> para renda comprometida) foram definidos para garantir que perfis de teste extremos (como o "superendividado") fossem sempre capturados por essa camada de seguran√ßa.
                </li>
                <li>
                    <strong>F√≥rmula para Risco Alto (Score < 400):</strong> a f√≥rmula <code>prob = 0.75 + (400 - score) / 1000.0</code> foi criada para estabelecer uma base de <strong>75% de risco</strong>, que aumenta progressivamente quanto pior for o score de regras. Isso garante que a recusa seja sempre decisiva.
                </li>
                <li>
                    <strong>F√≥rmula para Risco Baixo (Score > 650):</strong> da mesma forma, a f√≥rmula <code>prob = 0.10 - (score - 650) / 1000.0</code> estabelece uma base de apenas <strong>10% de risco</strong>, que diminui ainda mais quanto melhor for o perfil. Isso garante uma pr√©-aprova√ß√£o com alta confian√ßa.
                </li>
            </ul>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingValidacao">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseValidacao" aria-expanded="false" aria-controls="collapseValidacao">
                Valida√ß√£o e Testes de Coer√™ncia
            </a>
        </h4>
    </div>
    <div id="collapseValidacao" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingValidacao">
        <div class="panel-body">
            <p>
                Ap√≥s o desenvolvimento da arquitetura h√≠brida, foi crucial conduzir uma fase de valida√ß√£o para garantir que as falhas de coer√™ncia haviam sido eliminadas de forma definitiva. O objetivo n√£o era apenas corrigir os exemplos espec√≠ficos, mas garantir a robustez geral do sistema.
            </p>
            
            <h4 style="margin-top: 25px;">Metodologia de Testes</h4>
            <p>
                Foi criada uma su√≠te de testes de sanidade composta por diversos "perfis arquet√≠picos". Cada perfil foi desenhado para testar um limite espec√≠fico da l√≥gica de neg√≥cio, simulando cen√°rios extremos que o modelo simplificado n√£o conseguiu tratar corretamente. A performance do sistema h√≠brido foi ent√£o comparada com a do modelo ML puro para cada caso.
            </p>

            <h4 style="margin-top: 25px;">Tabela Resumo de Valida√ß√£o</h4>
            <div class="table-responsive">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Caso de Teste</th>
                <th>Resultado Esperado</th>
                <th>Resultado (ML Puro)</th>
                <th>Resultado (Sistema H√≠brido)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Perfil Milion√°rio</strong><br><small>Renda alt√≠ssima, empr√©stimo irris√≥rio.</small></td>
                <td>Score > 950</td>
                <td class="status-inconsistente">Score 620 (Inconsistente)</td>
                <td class="status-corrigido">Score 980 (Corrigido)</td>
            </tr>
            <tr>
                <td><strong>Perfil Superendividado</strong><br><small>Parcela compromete 90% da renda.</small></td>
                <td>Score < 200</td>
                <td class="status-inconsistente">Score 380 (Inconsistente)</td>
                <td class="status-corrigido">Score 100 (Corrigido)</td>
            </tr>
            <tr>
                <td><strong>Perfil Jovem Inst√°vel</strong><br><small>21 anos, 6 meses de emprego.</small></td>
                <td>Score < 400</td>
                <td class="status-inconsistente">Score 490 (Inconsistente)</td>
                <td class="status-corrigido">Score 200 (Corrigido)</td>
            </tr>
            <tr>
                <td><strong>Servidor P√∫blico Est√°vel</strong><br><small>45 anos, 20 de emprego, cr√©dito alto.</small></td>
                <td>Score > 700</td>
                <td class="status-inconsistente"> PREENCHER </td>
                <td class="status-corrigido"> PREENCHER </td>
            </tr>
            <tr>
                <td><strong>Empreendedor de Risco</strong><br><small>Renda alta, < 1 ano de emprego.</small></td>
                <td>Score < 500</td>
                <td class="status-inconsistente"> PREENCHER </td>
                <td class="status-corrigido"> PREENCHER </td>
            </tr>
            <tr>
                <td><strong>Aposentado Renda Fixa</strong><br><small>68 anos, aposentado, cr√©dito baixo.</small></td>
                <td>Score > 800</td>
                <td class="status-inconsistente"> PREENCHER </td>
                <td class="status-corrigido"> PREENCHER </td>
            </tr>
        </tbody>
    </table>
</div>

            <h4 style="margin-top: 30px;">Conclus√£o da Valida√ß√£o</h4>
            <p>
                A su√≠te de testes confirmou que <strong>a arquitetura h√≠brida foi eficaz em resolver as falhas de coer√™ncia</strong> do modelo simplificado. O sistema final demonstrou ser n√£o apenas preditivo para os casos complexos, mas tamb√©m seguro, robusto e alinhado com a l√≥gica de neg√≥cio para os casos extremos.
            </p>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingConsideracoes">
        <h4 class="panel-title">
            <a role="button" data-toggle="collapse" href="#collapseConsideracoes" aria-expanded="false" aria-controls="collapseConsideracoes">
                Considera√ß√µes Finais e Pr√≥ximos Passos
            </a>
        </h4>
    </div>
    <div id="collapseConsideracoes" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingConsideracoes">
        <div class="panel-body">
            <p>
                Este projeto representou uma jornada completa pelo ciclo de vida de uma solu√ß√£o de dados, come√ßando com uma an√°lise preditiva profunda (Parte 1) e culminando na engenharia de um produto de dados robusto e interativo (Parte 2).
            </p>
            
            <h4 style="margin-top: 25px;">Principais Aprendizados</h4>
            <ul class="list-with-bars" data-color="#6f42c1"> <li>
                    <strong>A Diferen√ßa Crucial entre An√°lise e Produ√ß√£o:</strong> o maior aprendizado foi que um modelo com alta acur√°cia estat√≠stica n√£o √©, necessariamente, um bom produto. Um modelo de produ√ß√£o exige robustez, coer√™ncia com a l√≥gica de neg√≥cio e "grades de prote√ß√£o", como a arquitetura h√≠brida implementada.
                </li>
                <li>
                    <strong>O Poder da Arquitetura H√≠brida:</strong> a combina√ß√£o de um Scorecard de Regras (para seguran√ßa e transpar√™ncia nos casos extremos) com Machine Learning (para nuance nos casos complexos) provou ser uma solu√ß√£o eficaz para criar um sistema confi√°vel e inteligente.
                </li>
                <li>
                    <strong>A Necessidade de Testes de Sanidade:</strong> ficou evidente que a valida√ß√£o de um modelo vai al√©m das m√©tricas. A cria√ß√£o de uma su√≠te de testes com perfis arquet√≠picos para validar o "bom senso" do sistema √© uma etapa indispens√°vel no desenvolvimento de produtos de IA.
                </li>
            </ul>

            <h4 style="margin-top: 30px;">Pr√≥ximos Passos e Melhorias Futuras</h4>
             <p>
                Esta calculadora √© um ponto de partida com potencial de evolu√ß√£o. Algumas das pr√≥ximas etapas l√≥gicas seriam:
            </p>
            <ul class="list-with-bars" data-color="#007bff"> 
                <li>
                    <strong>Testes A/B:</strong> com a aplica√ß√£o online, seria poss√≠vel rodar testes A/B para otimizar a arquitetura. Por exemplo, testar uma vers√£o com a "zona cinzenta" do ML ligeiramente mais ampla (ex: 350-700) contra a atual (400-650) para medir o impacto na taxa de aprova√ß√£o versus o risco.
                </li>
                <li>
                    <strong>Monitoramento do Modelo:</strong> implementar um sistema para monitorar a performance do modelo em produ√ß√£o e detectar "model drift" (quando os padr√µes dos dados mudam com o tempo), garantindo que o modelo continue preciso a longo prazo.
                </li>
            </ul>
            
            <hr>
            <p class="text-center" style="margin-top: 20px;">
                <strong>Este projeto serviu como uma jornada de aprendizado completa, que me proporcionou o desenvolvimento de habilidades t√©cnicas em Machine Learning, desenvolvimento web e tamb√©m a vis√£o estrat√©gica necess√°ria para transformar dados em solu√ß√µes de valor.</strong>
            </p>

        </div>
        
        </div>
                    
                </div>
                <div class="row" style="margin-top: 50px; text-align: center;">
                    <div class="col-md-12">
                        <h3>Gostou do que viu?</h3>
                        <p>A an√°lise completa, com todo o c√≥digo Python, o notebook e os arquivos de dados, est√° dispon√≠vel no meu GitHub.</p>
                        <a href="URL_DO_SEU_GITHUB_AQUI" target="_blank" class="btn btn-primary btn-lg">
                            <i class="fab fa-github"></i> Ver C√≥digo no GitHub
                        </a>
                    </div>
                </div>
    </div>
</div>
			</div>
		</div>
	</div><div class="container-wrap">
			<footer id="fh5co-footer" role="contentinfo">
				<div class="row">

					<div class="col-md-3">
						<h4>Contato</h4>
						<ul class="fh5co-footer-links">
							<li><a href="mailto:info@yoursite.com">gloriaxgz@hotmail.com</a></li>
						</ul>
					</div>

				</div>

				<div class="row copyright">
					<div class="col-md-12 text-center">
						<p>
							<ul class="fh5co-social-icons">
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="fab fa-github"></i></a></li>
							</ul>
						</p>
					</div>
				</div>
			</footer>
		</div></div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
	</div>
	
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.waypoints.min.js"></script>
	<script src="js/jquery.flexslider-min.js"></script>
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>
	<script src="js/jquery.countTo.js"></script>
	<script src="js/main.js"></script>

	<script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- 1. CAPTURA DE ELEMENTOS ---
            const form = document.getElementById('credit-form');
            const resultadoDiv = document.getElementById('resultado-analise');
            const resultadoTitulo = document.getElementById('resultado-titulo');
            const resultadoScore = document.getElementById('resultado-score');
            const resultadoTexto = document.getElementById('resultado-texto');
            const explicacaoRecusaDiv = document.getElementById('explicacao-recusa');
            const listaMotivosUl = document.getElementById('lista-motivos-recusa');
            const incomeInput = document.getElementById('AMT_INCOME_TOTAL');
            const annuityInput = document.getElementById('AMT_ANNUITY');
            const errorDiv = document.getElementById('error-messages');
            const errorList = document.getElementById('error-list');

            // --- 2. FUN√á√ÉO DE VALIDA√á√ÉO DO FORMUL√ÅRIO ---
            function validarFormulario() {
                errorList.innerHTML = '';
                const erros = [];
                const idade = parseFloat(document.getElementById('DAYS_BIRTH').value);
                const filhos = parseFloat(document.getElementById('CNT_CHILDREN').value);
                const tempoTrabalho = parseFloat(document.getElementById('DAYS_EMPLOYED').value);
                const renda = parseFloat(document.getElementById('AMT_INCOME_TOTAL').value);
                const credito = parseFloat(document.getElementById('AMT_CREDIT').value);
                const parcela = parseFloat(document.getElementById('AMT_ANNUITY').value);
                const valorBem = parseFloat(document.getElementById('AMT_GOODS_PRICE').value);

                if (isNaN(idade) || idade < 18 || idade > 100) erros.push("A idade deve ser entre 18 e 100 anos.");
                if (isNaN(filhos) || filhos < 0 || filhos > 30) erros.push("O n√∫mero de filhos deve ser entre 0 e 30.");
                if (isNaN(tempoTrabalho) || tempoTrabalho < 0 || tempoTrabalho > 60) erros.push("O tempo de trabalho deve ser entre 0 e 60 anos.");

                // --- L√ìGICA E MENSAGEM CORRIGIDAS AQUI ---
                const maxTempoTrabalho = idade - 14;
                if (idade > 14 && tempoTrabalho > maxTempoTrabalho) {
                    erros.push(`Para ${idade} anos de idade, o tempo de trabalho n√£o pode ser maior que ${maxTempoTrabalho} anos (considerando in√≠cio aos 14 anos).`);
                }
                // ---------------------------------------------

                if (isNaN(renda) || renda <= 0 || renda > 2000000) erros.push("A renda mensal deve ser entre R$ 1 e R$ 2.000.000.");
                if (isNaN(credito) || credito <= 0 || credito > 10000000) erros.push("O valor solicitado √© inv√°lido (maior que zero e menor que R$ 10.000.000).");
                if (isNaN(parcela) || parcela <= 0 || parcela > 500000) erros.push("O valor da parcela √© inv√°lido (maior que zero e menor que R$ 500.000).");
                if (isNaN(valorBem) || valorBem <= 0 || valorBem > 10000000) erros.push("O valor do bem √© inv√°lido (maior que zero e menor que R$ 10.000.000).");

                if (erros.length > 0) {
                    erros.forEach(erro => { errorList.appendChild(Object.assign(document.createElement('li'), { textContent: erro })); });
                    errorDiv.style.display = 'block';
                    return false;
                }
                errorDiv.style.display = 'none';
                return true;
            }
            // --- 3. FEEDBACK INTERATIVO ---
            const warningMessage = Object.assign(document.createElement('small'), { style: 'color: #a94442; display: block; margin-top: 5px;' });
            annuityInput.parentElement.appendChild(warningMessage);
            function checkDebtRatio() {
                const income = parseFloat(incomeInput.value), annuity = parseFloat(annuityInput.value);
                warningMessage.textContent = '', annuityInput.style.borderColor = '';
                if (income > 0 && annuity > 0 && (annuity / income) > 0.6) {
                    warningMessage.textContent = 'Aten√ß√£o: A parcela compromete mais de 60% da sua renda.';
                    annuityInput.style.borderColor = '#a94442';
                }
            }
            incomeInput.addEventListener('input', checkDebtRatio);
            annuityInput.addEventListener('input', checkDebtRatio);

            // --- 4. ENVIO DO FORMUL√ÅRIO ---
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                if (!validarFormulario()) return;

                resultadoDiv.style.display = 'block';
                explicacaoRecusaDiv.style.display = 'none';
                listaMotivosUl.innerHTML = '';
                resultadoTitulo.textContent = 'Analisando...';
                resultadoScore.textContent = '-';
                resultadoTexto.textContent = 'Por favor, aguarde.';
                resultadoDiv.style.backgroundColor = '#f0f0f0';

                const data = {};
                const colunasNumericas = ['DAYS_BIRTH', 'CNT_CHILDREN', 'AMT_INCOME_TOTAL', 'AMT_CREDIT', 'AMT_ANNUITY', 'AMT_GOODS_PRICE', 'DAYS_EMPLOYED'];
                form.querySelectorAll('input, select').forEach(element => {
                    if (element.id && element.value) {
                        let valor = element.value;
                        if (colunasNumericas.includes(element.id)) valor = parseFloat(valor);
                        if (element.id === 'DAYS_BIRTH' || element.id === 'DAYS_EMPLOYED') data[element.id] = -Math.abs(valor * 365);
                        else data[element.id] = valor;
                    }
                });

                const apiUrl = 'https://huggingface.co/spaces/gloriaxgz/gloriaxgz-webapp/predict';

                fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                .then(response => {
                    if (!response.ok) {
                        return response.json().then(errorData => {
                            throw new Error(errorData.error || `Erro no servidor: ${response.status}`);
                        });
                    }
                    return response.json();
                })
                .then(result => {
                    if (result.error) {
                        resultadoTitulo.textContent = 'Erro na An√°lise';
                        resultadoTexto.textContent = result.error;
                        resultadoScore.textContent = '‚ö†Ô∏è';
                        resultadoDiv.style.backgroundColor = '#f8d7da';
                    } else {
                        resultadoScore.textContent = result.score_formatado;
                        if (result.score_formatado < 550) {
                            resultadoTitulo.textContent = 'An√°lise de Cr√©dito: Recusado';
                            resultadoTexto.textContent = 'Infelizmente, n√£o foi poss√≠vel aprovar seu cr√©dito neste momento.';
                            resultadoDiv.style.backgroundColor = '#f8d7da';
                            if (result.motivos_recusa && result.motivos_recusa.length > 0) {
                                result.motivos_recusa.forEach(motivo => {
                                    const li = document.createElement('li');
                                    li.textContent = motivo;
                                    listaMotivosUl.appendChild(li);
                                });
                                explicacaoRecusaDiv.style.display = 'block';
                            }
                        } else {
                            resultadoTitulo.textContent = 'An√°lise de Cr√©dito: Aprovado';
                            resultadoTexto.textContent = 'Parab√©ns! Sua solicita√ß√£o de cr√©dito foi pr√©-aprovada.';
                            resultadoDiv.style.backgroundColor = '#d1e7dd';
                        }
                    }
                })
                .catch(error => {
                    resultadoTitulo.textContent = 'Erro de Conex√£o';
                    resultadoTexto.textContent = 'N√£o foi poss√≠vel conectar ao servidor. Verifique se o app.py est√° rodando.';
                    resultadoDiv.style.backgroundColor = '#f2dede';
                    console.error('Erro de conex√£o:', error);
                });
            });
        });
    </script>
    <script>
		$(document).ready(function(){
			// Escuta o evento 'shown.bs.collapse', que √© disparado pelo Bootstrap
			// quando um painel de acorde√£o TERMINA de abrir.
			$('.panel-collapse').on('shown.bs.collapse', function () {
				
				// Pega a posi√ß√£o do topo do T√çTULO do acorde√£o que acabou de abrir.
				// Usamos .prev('.panel-heading') para selecionar o t√≠tulo em vez do corpo.
				var targetPosition = $(this).prev('.panel-heading').offset().top;
				
				// Anima a rolagem da p√°gina para essa posi√ß√£o.
				// O n√∫mero 800 √© a velocidade da anima√ß√£o em milissegundos (0.8 segundos).
				$('html, body').animate({
					scrollTop: targetPosition - 30 // Adiciona um pequeno espa√ßamento de 30px do topo
				}, 800);
			});
		});
</script>
</body>
</html>